// In the name of Allah, Most Gracious, Most Merciful

// LightOJ/1061
// N Queen Again
// dp
// 
// 
// AC (2012-05-23 12:23:30)

#include <cmath>
#include <cstdio>
#include <cstring>
#include <algorithm>

#define SET(c) memset(c, -1, sizeof(c))

using namespace std;

const int P[][8]={
	{0, 4, 7, 5, 2, 6, 1, 3},
	{0, 5, 7, 2, 6, 3, 1, 4},
	{0, 6, 3, 5, 7, 1, 4, 2},
	{0, 6, 4, 7, 1, 3, 5, 2},
	{1, 3, 5, 7, 2, 0, 6, 4},
	{1, 4, 6, 0, 2, 7, 5, 3},
	{1, 4, 6, 3, 0, 7, 5, 2},
	{1, 5, 0, 6, 3, 7, 2, 4},
	{1, 5, 7, 2, 0, 3, 6, 4},
	{1, 6, 2, 5, 7, 4, 0, 3},
	{1, 6, 4, 7, 0, 3, 5, 2},
	{1, 7, 5, 0, 2, 4, 6, 3},
	{2, 0, 6, 4, 7, 1, 3, 5},
	{2, 4, 1, 7, 0, 6, 3, 5},
	{2, 4, 1, 7, 5, 3, 6, 0},
	{2, 4, 6, 0, 3, 1, 7, 5},
	{2, 4, 7, 3, 0, 6, 1, 5},
	{2, 5, 1, 4, 7, 0, 6, 3},
	{2, 5, 1, 6, 0, 3, 7, 4},
	{2, 5, 1, 6, 4, 0, 7, 3},
	{2, 5, 3, 0, 7, 4, 6, 1},
	{2, 5, 3, 1, 7, 4, 6, 0},
	{2, 5, 7, 0, 3, 6, 4, 1},
	{2, 5, 7, 0, 4, 6, 1, 3},
	{2, 5, 7, 1, 3, 0, 6, 4},
	{2, 6, 1, 7, 4, 0, 3, 5},
	{2, 6, 1, 7, 5, 3, 0, 4},
	{2, 7, 3, 6, 0, 5, 1, 4},
	{3, 0, 4, 7, 1, 6, 2, 5},
	{3, 0, 4, 7, 5, 2, 6, 1},
	{3, 1, 4, 7, 5, 0, 2, 6},
	{3, 1, 6, 2, 5, 7, 0, 4},
	{3, 1, 6, 2, 5, 7, 4, 0},
	{3, 1, 6, 4, 0, 7, 5, 2},
	{3, 1, 7, 4, 6, 0, 2, 5},
	{3, 1, 7, 5, 0, 2, 4, 6},
	{3, 5, 0, 4, 1, 7, 2, 6},
	{3, 5, 7, 1, 6, 0, 2, 4},
	{3, 5, 7, 2, 0, 6, 4, 1},
	{3, 6, 0, 7, 4, 1, 5, 2},
	{3, 6, 2, 7, 1, 4, 0, 5},
	{3, 6, 4, 1, 5, 0, 2, 7},
	{3, 6, 4, 2, 0, 5, 7, 1},
	{3, 7, 0, 2, 5, 1, 6, 4},
	{3, 7, 0, 4, 6, 1, 5, 2},
	{3, 7, 4, 2, 0, 6, 1, 5},
	{4, 0, 3, 5, 7, 1, 6, 2},
	{4, 0, 7, 3, 1, 6, 2, 5},
	{4, 0, 7, 5, 2, 6, 1, 3},
	{4, 1, 3, 5, 7, 2, 0, 6},
	{4, 1, 3, 6, 2, 7, 5, 0},
	{4, 1, 5, 0, 6, 3, 7, 2},
	{4, 1, 7, 0, 3, 6, 2, 5},
	{4, 2, 0, 5, 7, 1, 3, 6},
	{4, 2, 0, 6, 1, 7, 5, 3},
	{4, 2, 7, 3, 6, 0, 5, 1},
	{4, 6, 0, 2, 7, 5, 3, 1},
	{4, 6, 0, 3, 1, 7, 5, 2},
	{4, 6, 1, 3, 7, 0, 2, 5},
	{4, 6, 1, 5, 2, 0, 3, 7},
	{4, 6, 1, 5, 2, 0, 7, 3},
	{4, 6, 3, 0, 2, 7, 5, 1},
	{4, 7, 3, 0, 2, 5, 1, 6},
	{4, 7, 3, 0, 6, 1, 5, 2},
	{5, 0, 4, 1, 7, 2, 6, 3},
	{5, 1, 6, 0, 2, 4, 7, 3},
	{5, 1, 6, 0, 3, 7, 4, 2},
	{5, 2, 0, 6, 4, 7, 1, 3},
	{5, 2, 0, 7, 3, 1, 6, 4},
	{5, 2, 0, 7, 4, 1, 3, 6},
	{5, 2, 4, 6, 0, 3, 1, 7},
	{5, 2, 4, 7, 0, 3, 1, 6},
	{5, 2, 6, 1, 3, 7, 0, 4},
	{5, 2, 6, 1, 7, 4, 0, 3},
	{5, 2, 6, 3, 0, 7, 1, 4},
	{5, 3, 0, 4, 7, 1, 6, 2},
	{5, 3, 1, 7, 4, 6, 0, 2},
	{5, 3, 6, 0, 2, 4, 1, 7},
	{5, 3, 6, 0, 7, 1, 4, 2},
	{5, 7, 1, 3, 0, 6, 4, 2},
	{6, 0, 2, 7, 5, 3, 1, 4},
	{6, 1, 3, 0, 7, 4, 2, 5},
	{6, 1, 5, 2, 0, 3, 7, 4},
	{6, 2, 0, 5, 7, 4, 1, 3},
	{6, 2, 7, 1, 4, 0, 5, 3},
	{6, 3, 1, 4, 7, 0, 2, 5},
	{6, 3, 1, 7, 5, 0, 2, 4},
	{6, 4, 2, 0, 5, 7, 1, 3},
	{7, 1, 3, 0, 6, 4, 2, 5},
	{7, 1, 4, 2, 0, 6, 3, 5},
	{7, 2, 0, 5, 1, 4, 6, 3},
	{7, 3, 0, 2, 5, 1, 6, 4}
};
int Q[8][2];
int D[8][(1<<8)+5];

int dp(int c, int i, int x) {
	if(i == 8)
		return 0;
	int &r = D[i][x];
	if(r == -1) {
		r = 1<<28;
		for(int j = 0; j < 8; ++j) if((x&(1<<j)) == 0) {
			int v = 2;
			if(j == Q[i][0] && P[c][j] == Q[i][1])
				v = 0;
			else if(j == Q[i][0] || P[c][j] == Q[i][1] || abs(j-Q[i][0]) == abs(P[c][j]-Q[i][1]))
				v = 1;
			r = min(r, v+dp(c, i+1, x|(1<<j)));
		}
	}
	return r;
}

int main() {
	int T, no = 1;
	scanf("%d", &T);
	while(T--) {
		for(int i = 0, k = 0; i < 8; ++i) {
			char S[10];
			scanf("%s", S);
			for(int j = 0; j < 8; ++j) if(S[j] == 'q')
				Q[k][0] = i, Q[k++][1] = j;
		}
		int r = 1<<28;
		for(int i = 0; i < 92; ++i) {
			SET(D);
			r = min(r, dp(i, 0, 0));
		}
		printf("Case %d: %d\n", no++, r);
	}
	return 0;
}
